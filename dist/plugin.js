!function(){"use strict";const e=W.require("utils"),t=W.require("urls"),n=W.require("http"),r="SDG.SET_LOCATION",o="SDG.SET_MODEL",i="SDG.SET_TIME",l="SDG.ADD_SUBSCRIPTION",u="SDG.DELETE_SUBSCRIPTION",s="SDG.SET_ACTIVE",a="SDG.MOVE_MARKER",c="SDG.REMOVE_MARKER",p="SDG.SET_WIDTH",f="SDG.SET_HEIGHT",d="SDG.SET_METRIC_TEMP",h="SDG.SET_METRIC_ALTITUDE",_="SDG.SET_METRIC_SPEED",m="SDG.SET_FAVORITES",y="SDG.SET_Y_POINTER",g="SDG.FETCH_PARAMS",v="SDG.RECEIVE_PARAMS",b="SDG.TOGGLE_ZOOM",w=["ecmwf","gfs","nam","icon","hrrr"],x=e=>({type:m,payload:e}),S=e=>({type:d,payload:e}),E=e=>({type:h,payload:e}),P=e=>({type:_,payload:e}),k=(e,t)=>n=>{n({type:r,payload:{lat:e,lon:t}}),n(D(e,t)),n(R())},M=e=>t=>{const n=w.some((t=>e.startsWith(t)))?e:"ecmwf";t({type:o,payload:n}),t(R())},O=e=>({type:i,payload:e}),T=e=>({type:l,payload:e});const C=()=>(e,t)=>{t().plugin.subscriptions.forEach((t=>{t(),e(function(e){return{type:u,payload:e}}(t))}))},N=e=>({type:s,payload:e}),D=(e,t)=>({type:a,payload:{lat:e,lon:t}}),A=e=>({type:p,payload:e}),$=e=>({type:f,payload:e});function R(){return(r,o)=>{const i=o(),{lat:l,lon:u,modelName:s}=i.plugin;if(null!=l&&null!=u&&null!=s&&function(t,n,r){if(!t)return!0;const o=t[e.latLon2str({lat:n,lon:r})];if(!o)return!0;if(o.isLoading)return!1;const i=Date.now();return i>o.nextUpdate&&i-o.loaded>6e4}(o().models[s],l,u)){r(j(l,u,s));const e=3,o=t.getPointForecast(s,{lat:l,lon:u,step:e},"detail"),i=t.getMeteogramForecast(s,{lat:l,lon:u,step:e});Promise.all([n.get(i),n.get(o)]).then((e=>{let[t,n]=e;r(I(l,u,s,t.data,n.data))}))}}}const j=(e,t,n)=>({type:g,payload:{lat:e,lon:t,modelName:n}}),I=(e,t,n,r,o)=>({type:v,payload:{lat:e,lon:t,modelName:n,airData:r,forecast:o}});function U(e,t,n,r,o){if(e==n)return t;const i=(o-e)/(n-e);return Array.isArray(t)?t.map(((e,t)=>e*(1-i)+r[t]*i)):t*(1-i)+r*i}function H(e,t,n){const r=e[0]>e[1];return n.map((n=>{let o=e.findIndex((e=>r?e<=n:e>=n));return-1==o?o=e.length-1:0==o&&(o=1),U(e[o-1],t[o-1],e[o],t[o],n)}))}function q(e,t,n,r){const o=Math.max(e[0],n[0]),i=Math.min(e[e.length-1],n[n.length-1]),l=Array.from(new Set([...e,...n])).filter((e=>e>=o&&e<=i)).sort(((e,t)=>Number(e)>Number(t)?1:-1)),u=H(e,t,l),s=H(n,r,l);for(let e=0;e<l.length-1;e++){const t=u[e],n=s[e],r=l[e];if(t==n)return[r,t];const o=u[e+1],i=s[e+1];if(Math.sign(n-t)!=Math.sign(i-o)){const u=l[e+1]-r,s=(o-t)/u,a=(n-t)/(s-(i-n)/u);return[r+a,t+a*s]}}return null}function z(e,t){return e.map(((e,n)=>[e,t[n]]))}function F(e,t){const n=n=>H(e,t,[n])[0];return n.invert=n=>H(t,e,[n])[0],n}function V(e,t){e=e.map(Math.log);const n=n=>H(e,t,[Math.log(n)])[0];return n.invert=n=>Math.exp(H(t,e,[n])[0]),n}function B(e,t){return n=>{const r=n.map((n=>e(n).toFixed(1)+","+t(n).toFixed(1)));return"M"+r.join("L")}}function G(e,t,n){return e+n*(t-e)}const Y=[0,5,11,16.7,25,33.4,50,58.4,66.7,75,83.3,92,98,100],K=[null,950,925,900,850,800,700,600,500,400,300,200,150,null],Z=new Uint8Array(256);for(let e=0;e<160;e++)Z[e]=X(24*Math.floor((e+12)/16),160);function X(e,t){return e<0?0:e>t-1?t-1:e}function J(e){return Z[Math.floor(X(e,160))]}function Q(e,t,n,r,o){return(.5*-e+3*t*.5-3*n*.5+.5*r)*o**3+(e-5*t*.5+2*n-.5*r)*o**2+(.5*-e+.5*n)*o+t}function ee(e,t,n){return Q(Q(e[0],e[1],e[2],e[3],t),Q(e[4],e[5],e[6],e[7],t),Q(e[8],e[9],e[10],e[11],t),Q(e[12],e[13],e[14],e[15],t),n)}var te="NOT_FOUND";var ne=function(e,t){return e===t};function re(e,t){var n,r,o="object"==typeof t?t:{equalityCheck:t},i=o.equalityCheck,l=void 0===i?ne:i,u=o.maxSize,s=void 0===u?1:u,a=o.resultEqualityCheck,c=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e(t[o],n[o]))return!1;return!0}}(l),p=1===s?(n=c,{get:function(e){return r&&n(r.key,e)?r.value:te},put:function(e,t){r={key:e,value:t}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var o=n[r];return r>0&&(n.splice(r,1),n.unshift(o)),o.value}return te}return{get:r,put:function(t,o){r(t)===te&&(n.unshift({key:t,value:o}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(s,c);function f(){var t=p.get(arguments);if(t===te){if(t=e.apply(null,arguments),a){var n=p.getEntries().find((function(e){return a(e.value,t)}));n&&(t=n.value)}p.put(arguments,t)}return t}return f.clearCache=function(){return p.clear()},f}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var i,l=0,u={memoizeOptions:void 0},s=r.pop();if("object"==typeof s&&(u=s,s=r.pop()),"function"!=typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var a=u.memoizeOptions,c=void 0===a?n:a,p=Array.isArray(c)?c:[c],f=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),d=e.apply(void 0,[function(){return l++,s.apply(null,arguments)}].concat(p)),h=e((function(){for(var e=[],t=f.length,n=0;n<t;n++)e.push(f[n].apply(null,arguments));return i=d.apply(null,e)}));return Object.assign(h,{resultFunc:s,memoizedResultFunc:d,dependencies:f,lastResult:function(){return i},recomputations:function(){return l},resetRecomputations:function(){return l=0}}),h}}var ie=oe(re);const le=W.require("metrics"),ue=W.require("utils"),se=W.require("map").map,ae=W.require("store"),ce=W.require("rootScope"),pe=e=>e.plugin.modelName,fe=e=>e.plugin.timestamp,de=e=>e.metrics.temp,he=e=>e.metrics.altitude,_e=e=>e.metrics.speed,me=e=>e.plugin.favorites,ye=e=>e.plugin.width,ge=e=>e.plugin.height-20,ve=e=>e.plugin.zoom,be=e=>e.plugin.yPointer,we=ie(de,(e=>t=>Math.round(le.temp.conv[e].conversion(t))));ie((e=>e.metrics.pressure),(e=>t=>Math.round(le.pressure.conv[e].conversion(t))));const xe=ie(he,(e=>t=>100*Math.round(le.altitude.conv[e].conversion(t)/100))),Se=ie(_e,(e=>t=>Math.round(le.wind.conv[e].conversion(t)))),Ee=ie((e=>e.plugin.lat),(e=>e.plugin.lon),((e,t)=>ue.latLon2str({lat:e,lon:t}))),Pe=ie(Ee,(e=>e.models),pe,((e,t,n)=>(t[n]||{})[e])),ke=ie(Pe,(e=>function(e){const t=e["rh-1000h"].length,n=K.length,r=new Array(t*n);for(let o=0,i=0;o<n;++o)if(null==K[o])for(let e=0;e<t;++e)r[i++]=0;else{const n=.01*Y[o],l=G(-60,-70,n),u=G(.025,.038,n),s=G(6,4,n),a=1-.8*Math.pow(n,.7),c=e[`rh-${K[o]}h`];for(let e=0;e<t;++e){const t=Number(c[e]);let n=Math.max(0,Math.min((t+l)*u,1));n=Math.pow(n,s)*a,r[i++]=n}}const o=10*t,i=300,l=new Array(o*i);let u=600;const s=new Array(u),a=new Array(16);let c,p=i;for(let e=0;e<n-1;++e){c=p,p=Math.round(299-2.99*Y[e+1]);const i=t*X(e+2,n),f=t*X(e+1,n),d=t*X(e+0,n),h=t*X(e-1,n);let _=0,m=5;const y=c-p,g=1/y;for(let n=0;n<t+1;++n){if(0==n&&y>0){const t=1/y;for(let n=0;n<y;n++)s[--u]=e,s[--u]=Math.round(1e4*t*n)}const c=X(n-2,t),v=X(n-1,t),b=X(n+0,t),w=X(n+1,t);a[0]=r[i+c],a[1]=r[i+v],a[2]=r[i+b],a[3]=r[i+w],a[4]=r[f+c],a[5]=r[f+v],a[6]=r[f+b],a[7]=r[f+w],a[8]=r[d+c],a[9]=r[d+v],a[10]=r[d+b],a[11]=r[d+w],a[12]=r[h+c],a[13]=r[h+v],a[14]=r[h+b],a[15]=r[h+w];const x=p*o+_,S=m-_,E=1/S;for(let e=0;e<y;++e){let t=x+e*o;for(let n=0;n<S;++n){const r=J(160*ee(a,E*n,g*e));l[t++]=255-r}}_=m,m+=10,m>o&&(m=o)}}return{clouds:l,width:o,height:i}}(e.airData.data))),Me=ie(ke,fe,Pe,((e,t,n)=>{const{clouds:r,width:o,height:i}=e,l=n.times,u=l.findIndex((e=>e>=t));if(-1==u)return null;const s=Math.max(0,u-1),a=o/l.length,c=a/2+u*a,p=a/2+s*a,f=Math.round(U(l[s],p,l[u],c,t)),d=[];for(let e=0;e<i;e++)d.push(r[f+e*o]);return d})),Oe=ie(Me,(e=>{const t=e.length,n=Y.map((e=>(t-1)*(1-e/100))),r=F([1e3,950,925,900,850,800,700,600,500,400,300,200,150,100],n);return(t,n)=>{const o=Math.round(r(t));if(null==n)return e[o];const i=Math.round(r(n)),l=e.slice(i,o).filter((e=>e>0));return l.length>0?Math.min(...l):0}})),Te=ie(Pe,(e=>!e||!0===e.isLoading));ie(Pe,(e=>e.tMax)),ie(Pe,(e=>e.tMin)),ie(Pe,(e=>e.pMax)),ie(Pe,(e=>e.pMin));const Ce=ie(Pe,(e=>{let{forecast:t,airData:n}=e,r=null==t.header.elevation?0:t.header.elevation;return null!=n.header.elevation&&(r=n.header.elevation),null!=n.header.modelElevation&&(r=n.header.modelElevation),r})),Ne=ie(Pe,(e=>e.forecast.header.updateTs)),De=ie(Pe,(e=>e.nextUpdate)),Ae=ie(Pe,(e=>e.forecast.celestial.TZoffset)),$e=ie(Pe,(e=>e.forecast.celestial.sunriseTs)),Re=ie(Pe,(e=>e.forecast.celestial.sunsetTs)),Le=ie($e,Re,fe,((e,t,n)=>{const r=e+72e5;return!(n<r||(n-r)%864e5>t-36e5-r)})),We=ie(ye,(e=>(t,n)=>{const r=se.getBounds();if(ce.isMobileOrTablet){const e=document.querySelector("#windy-plugin-sounding .plugin-content");if(!e)return void console.error("plugin div not found");const o=e.offsetHeight,i=se.getSize().y,l=t-(r.getSouth()-r.getNorth())/i*o/2;se.panTo({lng:n,lat:l})}else{const o=n-(r.getEast()-r.getWest())/se.getSize().x*e/2;se.panTo({lng:o,lat:t})}})),je=ie(Ae,(e=>t=>{let{direction:n,changeDay:r}=t,o=ae.get("timestamp");if(r){const t=new Date(o),r=t.getUTCHours();t.setUTCMinutes(0),o=t.getTime();const i=((13-e+24)%24-r)*n;o+=i<=0?n*(24+i)*3600*1e3:n*i*3600*1e3}else o+=3600*n*1e3;ae.set("timestamp",o)}));let Ie=Date.now();const Ue=ie(je,(e=>t=>{if(Date.now()>Ie){const n=t.shiftKey||t.ctrlKey,r=Math.sign(t.deltaY);e({direction:r,changeDay:n}),Ie=Date.now()+(n?800:20)}t.stopPropagation(),t.preventDefault()})),He="SKT.SET_P_MIN",qe=e=>({type:He,payload:e});function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Fe(e){var t=function(e,t){if("object"!==ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ze(t)?t:String(t)}function Ve(e,t,n){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ke="function"==typeof Symbol&&Symbol.observable||"@@observable",Ze=function(){return Math.random().toString(36).substring(7).split("").join(".")},Xe={INIT:"@@redux/INIT"+Ze(),REPLACE:"@@redux/REPLACE"+Ze(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ze()}};function Je(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Ye(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Ye(1));return n(Je)(e,t)}if("function"!=typeof e)throw new Error(Ye(2));var o=e,i=t,l=[],u=l,s=!1;function a(){u===l&&(u=l.slice())}function c(){if(s)throw new Error(Ye(3));return i}function p(e){if("function"!=typeof e)throw new Error(Ye(4));if(s)throw new Error(Ye(5));var t=!0;return a(),u.push(e),function(){if(t){if(s)throw new Error(Ye(6));t=!1,a();var n=u.indexOf(e);u.splice(n,1),l=null}}}function f(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(Ye(7));if(void 0===e.type)throw new Error(Ye(8));if(s)throw new Error(Ye(9));try{s=!0,i=o(i,e)}finally{s=!1}for(var t=l=u,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:Xe.INIT}),(r={dispatch:f,subscribe:p,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Ye(10));o=e,f({type:Xe.REPLACE})}})[Ke]=function(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Ye(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[Ke]=function(){return this},e},r}function Qe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}const et=287,tt=1005,nt=18.01528/28.9644,rt=2501e3,ot=6.112,it=273.15,lt=-.0065,ut=9.80665;function st(e,t,n){return t*Math.pow(e/n,et/tt)}function at(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:nt)*e/(t-e)}function ct(e){const t=e-it;return ot*Math.exp(17.67*t/(t+243.5))}function pt(e,t){const n=function(e,t){return at(ct(t),e)}(e,t);return 1/e*((et*t+rt*n)/(tt+Math.pow(rt,2)*n*nt/(et*Math.pow(t,2))))}function ft(e,t){return e*t/(nt+t)}function dt(e){const t=Math.log(e/ot);return it+243.5*t/(17.67-t)}const ht=W.require("utils"),_t=W.require("map").map,mt=W.require("map").markers.pulsatingIcon,yt=W.require("products"),gt=W.require("subscription");function vt(e,t,n,r){return n.map((n=>{const o=e.data[`${t}-${n}h`],i=Array.isArray(o)?o[r]:null;return"gh"===t&&null==i?Math.round(function(e){return 288.15/lt*(Math.pow(e/1013.25,-lt*et/ut)-1)}(n)):i}))}function bt(e,t,n){const r=t.data.hours,o=function(e){const t=[];for(let n in e.data){const e=n.match(/temp-(\d+)h$/);e&&t.push(Number(e[1]))}return t.sort(((e,t)=>Number(e)<Number(t)?1:-1))}(t),i=[];let l=Number.MIN_VALUE,u=Number.MAX_VALUE;for(let e=0;e<r.length;e++){const n=vt(t,"temp",o,e);l=Math.max(l,...n),u=Math.min(u,...n),i.push({temp:n,dewpoint:vt(t,"dewpoint",o,e),gh:vt(t,"gh",o,e),wind_u:vt(t,"wind_u",o,e),wind_v:vt(t,"wind_v",o,e)})}const s=gt.hasAny()&&yt[e].intervalPremium||yt[e].interval,a=n.header.updateTs+60*(s+60)*1e3;return{airData:t,forecast:n,times:r,values:i,levels:o,tMax:l,tMin:u,pMax:o[o.length-1],pMin:o[0],nextUpdate:a}}function wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;switch(t.type){case g:return{...e,isLoading:!0};case v:{const{airData:r,forecast:o}=t.payload,i=bt(n,r,o);return{...e,...i,isLoading:!1,loaded:Date.now()}}default:return e}}const xt=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var i,l=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Xe.INIT}))throw new Error(Ye(12));if(void 0===n(void 0,{type:Xe.PROBE_UNKNOWN_ACTION()}))throw new Error(Ye(13))}))}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var r=!1,o={},u=0;u<l.length;u++){var s=l[u],a=n[s],c=e[s],p=a(c,t);if(void 0===p)throw t&&t.type,new Error(Ye(14));o[s]=p,r=r||p!==c}return(r=r||l.length!==Object.keys(e).length)?o:e}}({plugin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{subscriptions:[],favorites:[],zoom:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return{...e,...t.payload};case o:return{...e,modelName:t.payload};case i:return{...e,timestamp:t.payload};case l:return{...e,subscriptions:e.subscriptions.concat(t.payload)};case u:return{...e,subscriptions:e.subscriptions.filter((e=>e!=t.payload))};case s:return{...e,active:t.payload};case a:{let{marker:n}=e;const{lon:r,lat:o}=t.payload;return n?(n.setLatLng({lat:o,lng:r}),e):(n=L.marker({lat:o,lng:r},{icon:mt,zIndexOffset:-300}).addTo(_t),{...e,marker:n})}case c:{const{marker:t}=e;return t&&_t.removeLayer(t),{...e,marker:null}}case p:return{...e,width:t.payload};case f:return{...e,height:t.payload};case m:return{...e,favorites:[...t.payload]};case y:return{...e,yPointer:t.payload};case b:return{...e,zoom:!e.zoom};default:return e}},models:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:case v:{const{modelName:n}=t.payload,r=e[n]||{},o=ht.latLon2str(t.payload);return{...e,[n]:{...r,[o]:wt(r[o],t,n)}}}default:return e}},metrics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{...e,temp:t.payload};case h:return{...e,altitude:t.payload};case _:return{...e,speed:t.payload};default:return e}},skewt:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pMax:1e3},t=arguments.length>1?arguments[1]:void 0;return t.type===He?{...e,pMin:t.payload}:e},windgram:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(arguments.length>1?arguments[1]:void 0).type,e}});function St(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}var Et=St();Et.withExtraArgument=St;var Pt=Et;const kt=W.require("utils").$,Mt=W.require("store");let Ot;function Tt(){if(Ot)return Ot;Ot=Je(xt,Qe(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Ye(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return r=Qe.apply(void 0,i)(n.dispatch),Ge(Ge({},n),{},{dispatch:r})}}}(...[Pt])));const e=kt("#bsounding-chart").clientWidth-10,t=Math.min(e,.7*window.innerHeight);return Ot.dispatch(A(e)),Ot.dispatch($(t)),Ct(),Ot.dispatch(qe(400)),Ot}function Ct(){Ot&&(Ot.dispatch(S(Mt.get("metric_temp"))),Ot.dispatch(E(Mt.get("metric_altitude"))),Ot.dispatch(P(Mt.get("metric_wind"))))}var Nt,Dt,At,$t,Rt,Lt,Wt,jt,It={},Ut=[],Ht=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function qt(e,t){for(var n in t)e[n]=t[n];return e}function zt(e){var t=e.parentNode;t&&t.removeChild(e)}function Ft(e,t,n){var r,o,i,l={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?Nt.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===l[i]&&(l[i]=e.defaultProps[i]);return Vt(e,l,r,o,null)}function Vt(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++At:o};return null==o&&null!=Dt.vnode&&Dt.vnode(i),i}function Bt(){return{current:null}}function Gt(e){return e.children}function Yt(e,t){this.props=e,this.context=t}function Kt(e,t){if(null==t)return e.__?Kt(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Kt(e):null}function Zt(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Zt(e)}}function Xt(e){(!e.__d&&(e.__d=!0)&&$t.push(e)&&!Jt.__r++||Rt!==Dt.debounceRendering)&&((Rt=Dt.debounceRendering)||Lt)(Jt)}function Jt(){var e,t,n,r,o,i,l,u;for($t.sort(Wt);e=$t.shift();)e.__d&&(t=$t.length,r=void 0,o=void 0,l=(i=(n=e).__v).__e,(u=n.__P)&&(r=[],(o=qt({},i)).__v=i.__v+1,an(u,i,o,n.__n,void 0!==u.ownerSVGElement,null!=i.__h?[l]:null,r,null==l?Kt(i):l,i.__h),cn(r,i),i.__e!=l&&Zt(i)),$t.length>t&&$t.sort(Wt));Jt.__r=0}function Qt(e,t,n,r,o,i,l,u,s,a){var c,p,f,d,h,_,m,y=r&&r.__k||Ut,g=y.length;for(n.__k=[],c=0;c<t.length;c++)if(null!=(d=n.__k[c]=null==(d=t[c])||"boolean"==typeof d||"function"==typeof d?null:"string"==typeof d||"number"==typeof d||"bigint"==typeof d?Vt(null,d,null,null,d):Array.isArray(d)?Vt(Gt,{children:d},null,null,null):d.__b>0?Vt(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)){if(d.__=n,d.__b=n.__b+1,null===(f=y[c])||f&&d.key==f.key&&d.type===f.type)y[c]=void 0;else for(p=0;p<g;p++){if((f=y[p])&&d.key==f.key&&d.type===f.type){y[p]=void 0;break}f=null}an(e,d,f=f||It,o,i,l,u,s,a),h=d.__e,(p=d.ref)&&f.ref!=p&&(m||(m=[]),f.ref&&m.push(f.ref,null,d),m.push(p,d.__c||h,d)),null!=h?(null==_&&(_=h),"function"==typeof d.type&&d.__k===f.__k?d.__d=s=en(d,s,e):s=nn(e,d,f,y,h,s),"function"==typeof n.type&&(n.__d=s)):s&&f.__e==s&&s.parentNode!=e&&(s=Kt(f))}for(n.__e=_,c=g;c--;)null!=y[c]&&("function"==typeof n.type&&null!=y[c].__e&&y[c].__e==n.__d&&(n.__d=rn(r).nextSibling),dn(y[c],y[c]));if(m)for(c=0;c<m.length;c++)fn(m[c],m[++c],m[++c])}function en(e,t,n){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,t="function"==typeof r.type?en(r,t,n):nn(n,r,r,o,r.__e,t));return t}function tn(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){tn(e,t)})):t.push(e)),t}function nn(e,t,n,r,o,i){var l,u,s;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),l=null;else{for(u=i,s=0;(u=u.nextSibling)&&s<r.length;s+=1)if(u==o)break e;e.insertBefore(o,i),l=i}return void 0!==l?l:o.nextSibling}function rn(e){var t,n,r;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=rn(n)))return r;return null}function on(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||Ht.test(t)?n:n+"px"}function ln(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||on(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||on(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?sn:un,i):e.removeEventListener(t,i?sn:un,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function un(e){return this.l[e.type+!1](Dt.event?Dt.event(e):e)}function sn(e){return this.l[e.type+!0](Dt.event?Dt.event(e):e)}function an(e,t,n,r,o,i,l,u,s){var a,c,p,f,d,h,_,m,y,g,v,b,w,x,S,E=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(s=n.__h,u=t.__e=n.__e,t.__h=null,i=[u]),(a=Dt.__b)&&a(t);try{e:if("function"==typeof E){if(m=t.props,y=(a=E.contextType)&&r[a.__c],g=a?y?y.props.value:a.__:r,n.__c?_=(c=t.__c=n.__c).__=c.__E:("prototype"in E&&E.prototype.render?t.__c=c=new E(m,g):(t.__c=c=new Yt(m,g),c.constructor=E,c.render=hn),y&&y.sub(c),c.props=m,c.state||(c.state={}),c.context=g,c.__n=r,p=c.__d=!0,c.__h=[],c._sb=[]),null==c.__s&&(c.__s=c.state),null!=E.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=qt({},c.__s)),qt(c.__s,E.getDerivedStateFromProps(m,c.__s))),f=c.props,d=c.state,c.__v=t,p)null==E.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==E.getDerivedStateFromProps&&m!==f&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,g),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,g)||t.__v===n.__v){for(t.__v!==n.__v&&(c.props=m,c.state=c.__s,c.__d=!1),c.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),v=0;v<c._sb.length;v++)c.__h.push(c._sb[v]);c._sb=[],c.__h.length&&l.push(c);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,g),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(f,d,h)}))}if(c.context=g,c.props=m,c.__P=e,b=Dt.__r,w=0,"prototype"in E&&E.prototype.render){for(c.state=c.__s,c.__d=!1,b&&b(t),a=c.render(c.props,c.state,c.context),x=0;x<c._sb.length;x++)c.__h.push(c._sb[x]);c._sb=[]}else do{c.__d=!1,b&&b(t),a=c.render(c.props,c.state,c.context),c.state=c.__s}while(c.__d&&++w<25);c.state=c.__s,null!=c.getChildContext&&(r=qt(qt({},r),c.getChildContext())),p||null==c.getSnapshotBeforeUpdate||(h=c.getSnapshotBeforeUpdate(f,d)),S=null!=a&&a.type===Gt&&null==a.key?a.props.children:a,Qt(e,Array.isArray(S)?S:[S],t,n,r,o,i,l,u,s),c.base=t.__e,t.__h=null,c.__h.length&&l.push(c),_&&(c.__E=c.__=null),c.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=pn(n.__e,t,n,r,o,i,l,s);(a=Dt.diffed)&&a(t)}catch(e){t.__v=null,(s||null!=i)&&(t.__e=u,t.__h=!!s,i[i.indexOf(u)]=null),Dt.__e(e,t,n)}}function cn(e,t){Dt.__c&&Dt.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Dt.__e(e,t.__v)}}))}function pn(e,t,n,r,o,i,l,u){var s,a,c,p=n.props,f=t.props,d=t.type,h=0;if("svg"===d&&(o=!0),null!=i)for(;h<i.length;h++)if((s=i[h])&&"setAttribute"in s==!!d&&(d?s.localName===d:3===s.nodeType)){e=s,i[h]=null;break}if(null==e){if(null===d)return document.createTextNode(f);e=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,f.is&&f),i=null,u=!1}if(null===d)p===f||u&&e.data===f||(e.data=f);else{if(i=i&&Nt.call(e.childNodes),a=(p=n.props||It).dangerouslySetInnerHTML,c=f.dangerouslySetInnerHTML,!u){if(null!=i)for(p={},h=0;h<e.attributes.length;h++)p[e.attributes[h].name]=e.attributes[h].value;(c||a)&&(c&&(a&&c.__html==a.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||ln(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||ln(e,i,t[i],n[i],r)}(e,f,p,o,u),c)t.__k=[];else if(h=t.props.children,Qt(e,Array.isArray(h)?h:[h],t,n,r,o&&"foreignObject"!==d,i,l,i?i[0]:n.__k&&Kt(n,0),u),null!=i)for(h=i.length;h--;)null!=i[h]&&zt(i[h]);u||("value"in f&&void 0!==(h=f.value)&&(h!==e.value||"progress"===d&&!h||"option"===d&&h!==p.value)&&ln(e,"value",h,p.value,!1),"checked"in f&&void 0!==(h=f.checked)&&h!==e.checked&&ln(e,"checked",h,p.checked,!1))}return e}function fn(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Dt.__e(e,n)}}function dn(e,t,n){var r,o;if(Dt.unmount&&Dt.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||fn(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Dt.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&dn(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||zt(e.__e),e.__=e.__e=e.__d=void 0}function hn(e,t,n){return this.constructor(e,n)}function _n(e,t,n){var r,o,i;Dt.__&&Dt.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,i=[],an(t,e=(!r&&n||t).__k=Ft(Gt,null,[e]),o||It,It,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?Nt.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r),cn(i,e)}function mn(e,t){_n(e,t,mn)}function yn(e,t,n){var r,o,i,l=qt({},e.props);for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:l[i]=t[i];return arguments.length>2&&(l.children=arguments.length>3?Nt.call(arguments,2):n),Vt(e.type,l,r||e.key,o||e.ref,null)}function gn(e,t){var n={__c:t="__cC"+jt++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,Xt(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}Nt=Ut.slice,Dt={__e:function(e,t,n,r){for(var o,i,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),l=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),l=o.__d),l)return o.__E=o}catch(t){e=t}throw e}},At=0,Yt.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=qt({},this.state),"function"==typeof e&&(e=e(qt({},n),this.props)),e&&qt(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),Xt(this))},Yt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Xt(this))},Yt.prototype.render=Gt,$t=[],Lt="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Wt=function(e,t){return e.__v.__b-t.__v.__b},Jt.__r=0,jt=0;const vn=W.require("utils"),bn=e=>Math.floor(.83*ye(e)-5),wn=e=>e.skewt.pMax,xn=ie((e=>e.skewt.pMin),ve,((e,t)=>t?e:150)),Sn=ie(Pe,fe,xn,((e,t,n)=>{if(!e||e.isLoading)return null;const{times:r,values:o}=e,i=r.findIndex((e=>e>=t));if(-1==i)return null;const l=Math.max(0,i-1);let u=e.levels.findIndex((e=>e<=n));-1==u&&(u=e.levels.length-1);const s=e.levels.slice(0,u+1),a={};Object.getOwnPropertyNames(o[l]).forEach((e=>{a[e]=U(r[l],o[l][e],r[i],o[i][e],t),a[e].splice(u+1)})),a.level=s;const c=a.wind_u.map(((e,t)=>{const n=a.wind_v[t];return vn.wind2obj([e,n])}));return a.windSpeed=c.map((e=>e.wind)),a.windDir=c.map((e=>e.dir)),a})),En=ie(Pe,(e=>e.tMax+8)),Pn=ie(En,(e=>e-60)),kn=ie(bn,ge,wn,xn,En,Pn,((e,t,n,r,o,i)=>e/t*75*(Math.log10(n)-Math.log10(r))/(o-i))),Mn=ie(bn,En,Pn,((e,t,n)=>F([n,t],[0,e]))),On=ie(bn,En,Pn,we,((e,t,n,r)=>F([n,t].map(r),[0,e]))),Tn=ie(ge,wn,xn,((e,t,n)=>V([t,n],[e,0]))),Cn=ie(Sn,(e=>V(e.level,e.gh))),Nn=ie(Sn,Cn,ge,xn,xe,((e,t,n,r,o)=>F([e.gh[0],t(r)].map(o),[n,0]))),Dn=ie(Mn,kn,ge,Tn,((e,t,n,r)=>B((o=>e(o[0])+t*(n-r(o[1]))),(e=>r(e[1]))))),An=ie(Ce,Sn,Cn,((e,t,n)=>{const r=t.level;return Math.min(n.invert(e),r[0])})),$n=ie(Sn,An,((e,t)=>V(e.level,e.temp)(t))),Rn=ie(Sn,An,((e,t)=>V(e.level,e.dewpoint)(t))),Ln=ie(he,(e=>"m"===e?1e3:3e3)),Wn=ie(de,(e=>"°C"===e?10:20)),jn=e=>Math.floor(17*ye(e)/100),In=ie(Sn,(e=>e?Math.max(60/3.6,...e.windSpeed):0)),Un=ie(In,jn,ve,((e,t,n)=>n?F([0,30/3.6,e],[0,t/2,t]):F([0,e],[0,t]))),Hn=ie(Un,Tn,((e,t)=>B((t=>e(t[0])),(e=>t(e[1])))));function qn(e,t){for(let n in e)if(!(n in t))return!0;for(let n in t)if(e[n]!==t[n])return!0;return!1}let zn=class extends Yt{shouldComponentUpdate(e,t){return qn(this.props,e)||qn(this.state,t)}};const Fn=W.require("utils"),Vn=W.require("store"),Bn=W.require("models");function Gn(e){return e.title||e.name}class Yn extends zn{render(e){let{cx:t,cy:n}=e;return Ft("svg",{width:"60",height:"60",viewBox:"0 0 38 38",x:t-30,y:n-30},Ft("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},Ft("circle",{cx:"18",cy:"18",r:"18",stroke:"#ddd"}),Ft("path",{d:"M36 18C36 8 28 0 18 0",stroke:"#333"},Ft("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))))}}function Kn(e){let{parcel:t,width:n,line:r,pToPx:o,formatAltitude:i}=e;const{trajectory:l,isohume:u,elevThermalTop:s,pThermalTop:a,pCloudTop:c}=t,p=[];if(l){const e=o(a);if(c){const t=o(c);p.push(Ft("rect",{y:t,height:e-t,width:n,fill:"url(#diag-hatch)"}),Ft(Zn,{x:n,y:e}),Ft("line",{class:"boundary",y1:t,y2:t,x2:n}))}p.push(Ft("line",{class:"boundary",y1:e,y2:e,x2:n}),Ft("text",{class:"tick",style:"fill: black","text-anchor":"end","dominant-baseline":"hanging",y:e+4,x:n-7,filter:"url(#whiteOutlineEffect)"},i(s)),Ft("path",{class:"parcel trajectory",d:r(l)})),u&&p.push(Ft("path",{class:"parcel isohume",d:r(u)}))}return p.length?Ft("g",null,p):null}class Zn extends zn{render(e){let{x:t,y:n}=e;return Ft("path",{class:"cumulus",transform:`translate(${t-36}, ${n-28})`,d:"M26.003 24H5.997C3.794 24 2 22.209 2 20c0-1.893 1.318-3.482 3.086-3.896A7.162 7.162 0 0 1 5 15c0-3.866 3.134-7 7-7 3.162 0 5.834 2.097 6.702 4.975A4.477 4.477 0 0 1 21.5 12c2.316 0 4.225 1.75 4.473 4h.03C28.206 16 30 17.791 30 20c0 2.205-1.789 4-3.997 4z"})}}class Xn extends zn{render(e){let{temp:t,pressure:n,height:r,pToPx:o,line:i}=e;const l=[],u=r/15;for(let e=r;e>-u;e-=u){const r=o.invert(e),i=st(r,t,n);l.push([i,r])}return Ft("path",{class:"dry",d:i(l)})}}class Jn extends zn{render(e){let{temp:t,pressure:n,height:r,pToPx:o,line:i}=e;const l=[];let u=n;const s=r/15;for(let e=r;e>-s;e-=s){const n=o.invert(e);t+=(n-u)*pt(n,t),u=n,l.push([t,n])}return Ft("path",{class:"moist",d:i(l)})}}class Qn extends zn{render(e){let{temp:t,pressure:n,height:r,pToPx:o,line:i}=e;const l=[],u=at(ct(t),n),s=r;for(let e=r;e>-s;e-=s){const t=o.invert(e),n=dt(ft(t,u));l.push([n,t])}return Ft("path",{class:"isohume",d:i(l)})}}class er extends zn{render(e){let{temp:t,height:n,pToPx:r,line:o}=e;const i=[[t,r.invert(n)],[t,r.invert(0)]];return Ft("path",{class:"isotherm "+(273==Math.round(t)?"zero":""),d:o(i)})}}class tr extends zn{render(e){let{height:t,width:n,metric:r,step:o,tAxisToPx:i}=e;const l=[];for(let e,u=Math.trunc(i.invert(0)/o)*o;!e;u+=o){const s=i(u);e=i(u+o)>n,l.push(Ft("text",{class:"tick","text-anchor":"middle","dominant-baseline":"hanging",y:t+5,x:s},u+(e?" "+r:"")))}return Ft("g",null,l)}}const nr=e=>{let{pAxisToPx:t,width:n,metric:r,step:o}=e;const i=[];for(let e,l=o;!e;l+=o){const u=t(l);e=t(l+o)<20,i.push(Ft("line",{y1:u,x2:n,y2:u,class:"light"}),Ft("text",{class:"tick",y:u-5,x:5,filter:"url(#whiteOutlineEffect)"},l+" "+(e?" "+r:"")))}return Ft("g",null,i)},rr=e=>{let{width:t,cloudCover:n,pToPx:r,pSfc:o,highClouds:i}=e;const l=[];let u=0;if(i){u=30;const e=n(r.invert(u),150);l.push(Ft(or,{y:"0",width:t,height:"30",cover:e}),Ft("text",{class:"tick",y:25,x:t-5,"text-anchor":"end",filter:"url(#whiteOutlineEffect)"},"upper clouds"),Ft("line",{y1:"30",y2:"30",x2:t,class:"boundary"}))}const s=r(o);for(;u<s;){const e=u,t=n(r.invert(u));let o=1;for(;u++<s&&n(r.invert(u))==t;)o++;l.push(Ft(or,{y:e,width:100,height:o,cover:t}))}return Ft("g",null,l)},or=e=>{let{y:t,height:n,width:r,cover:o}=e;if(255!=o)return Ft("rect",{y:t,height:n,width:r,fill:`rgba(${o}, ${o}, ${o}, 0.7)`})};const ir=e=>{let{height:t,width:n,metric:r,format:o,speedToPx:i,maxSpeed:l,zoom:u}=e;if(u){const e=i(30/3.6),u=e/2;return Ft("g",{class:"axis"},Ft("line",{y1:t,x1:u,x2:u,class:"light"}),Ft("rect",{width:n/2,height:t,fill:"white",opacity:"0.1"}),Ft("rect",{x:n/2,width:n/2,height:t,fill:"red",opacity:"0.1"}),Ft("text",{class:"tick",transform:`translate(${u-5} 80) rotate(-90)`,filter:"url(#whiteOutlineEffect)"},o(15/3.6)),Ft("text",{class:"tick",transform:`translate(${e-5} 80) rotate(-90)`,filter:"url(#whiteOutlineEffect)"},o(30/3.6)),Ft("text",{class:"tick",transform:`translate(${n-5} 80) rotate(-90)`,filter:"url(#whiteOutlineEffect)"},`${o(l)} ${r}`))}return Ft("g",{class:"axis"},Ft("rect",{width:n,height:t,fill:"white",opacity:"0.1"}),Ft("line",{y1:t,x1:n/3,x2:n/3,class:"light"}),Ft("text",{class:"tick",transform:`translate(${n/3-5} 80) rotate(-90)`,filter:"url(#whiteOutlineEffect)"},o(l/3)),Ft("line",{y1:t,x1:2*n/3,x2:2*n/3,class:"light"}),Ft("text",{class:"tick",transform:`translate(${2*n/3-5} 80) rotate(-90)`,filter:"url(#whiteOutlineEffect)"},o(2*l/3)),Ft("text",{class:"tick",transform:`translate(${n-5} 80) rotate(-90)`,filter:"url(#whiteOutlineEffect)"},`${o(l)} ${r}`))},lr=e=>{let{direction:t,y:n,speed:r}=e;return r>1?Ft("g",{transform:`translate(0,${n}) rotate(${t})`,stroke:"black",fill:"none"},Ft("line",{y2:"-30"}),Ft("path",{d:"M-4,-8L0,0L4,-8","stroke-linejoin":"round"})):Ft("g",{transform:`translate(0,${n})`,stroke:"black",fill:"none"},Ft("circle",{r:"6"}),Ft("circle",{r:"1"}))};function ur(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var sr,ar,cr,pr,fr={},dr={get exports(){return fr},set exports(e){fr=e}},hr={},_r=0,mr=[],yr=[],gr=Dt.__b,vr=Dt.__r,br=Dt.diffed,wr=Dt.__c,xr=Dt.unmount;function Sr(e,t){Dt.__h&&Dt.__h(ar,e,_r||t),_r=0;var n=ar.__H||(ar.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:yr}),n.__[e]}function Er(e){return _r=1,Pr(Hr,e)}function Pr(e,t,n){var r=Sr(sr++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Hr(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=ar,!ar.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var l=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(l=!0)}})),!(!l&&r.__c.props===e)&&(!i||i.call(this,e,t,n))};ar.u=!0;var i=ar.shouldComponentUpdate,l=ar.componentWillUpdate;ar.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,o(e,t,n),i=r}l&&l.call(this,e,t,n)},ar.shouldComponentUpdate=o}return r.__N||r.__}function kr(e,t){var n=Sr(sr++,3);!Dt.__s&&Ur(n.__H,t)&&(n.__=e,n.i=t,ar.__H.__h.push(n))}function Mr(e,t){var n=Sr(sr++,4);!Dt.__s&&Ur(n.__H,t)&&(n.__=e,n.i=t,ar.__h.push(n))}function Or(e){return _r=5,Cr((function(){return{current:e}}),[])}function Tr(e,t,n){_r=6,Mr((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function Cr(e,t){var n=Sr(sr++,7);return Ur(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Nr(e,t){return _r=8,Cr((function(){return e}),t)}function Dr(e){var t=ar.context[e.__c],n=Sr(sr++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(ar)),t.props.value):e.__}function Ar(e,t){Dt.useDebugValue&&Dt.useDebugValue(t?t(e):e)}function $r(){var e=Sr(sr++,11);if(!e.__){for(var t=ar.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Rr(){for(var e;e=mr.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(jr),e.__H.__h.forEach(Ir),e.__H.__h=[]}catch(t){e.__H.__h=[],Dt.__e(t,e.__v)}}Dt.__b=function(e){ar=null,gr&&gr(e)},Dt.__r=function(e){vr&&vr(e),sr=0;var t=(ar=e.__c).__H;t&&(cr===ar?(t.__h=[],ar.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=yr,e.__N=e.i=void 0}))):(t.__h.forEach(jr),t.__h.forEach(Ir),t.__h=[])),cr=ar},Dt.diffed=function(e){br&&br(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==mr.push(t)&&pr===Dt.requestAnimationFrame||((pr=Dt.requestAnimationFrame)||Wr)(Rr)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==yr&&(e.__=e.__V),e.i=void 0,e.__V=yr}))),cr=ar=null},Dt.__c=function(e,t){t.some((function(e){try{e.__h.forEach(jr),e.__h=e.__h.filter((function(e){return!e.__||Ir(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Dt.__e(n,e.__v)}})),wr&&wr(e,t)},Dt.unmount=function(e){xr&&xr(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{jr(e)}catch(e){t=e}})),n.__H=void 0,t&&Dt.__e(t,n.__v))};var Lr="function"==typeof requestAnimationFrame;function Wr(e){var t,n=function(){clearTimeout(r),Lr&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Lr&&(t=requestAnimationFrame(n))}function jr(e){var t=ar,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),ar=t}function Ir(e){var t=ar;e.__c=e.__(),ar=t}function Ur(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Hr(e,t){return"function"==typeof t?t(e):t}function qr(e,t){for(let n in t)e[n]=t[n];return e}function zr(e,t){for(let n in e)if("__source"!==n&&!(n in t))return!0;for(let n in t)if("__source"!==n&&e[n]!==t[n])return!0;return!1}function Fr(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function Vr(e){this.props=e}function Br(e,t){function n(e){let n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:zr(this.props,e)}function r(t){return this.shouldComponentUpdate=n,Ft(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r._forwarded=!0,r}Vr.prototype=new Yt,Vr.prototype.isPureReactComponent=!0,Vr.prototype.shouldComponentUpdate=function(e,t){return zr(this.props,e)||zr(this.state,t)};let Gr=Dt._diff;Dt._diff=e=>{e.type&&e.type._forwarded&&e.ref&&(e.props.ref=e.ref,e.ref=null),Gr&&Gr(e)};const Yr="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Kr(e){function t(t){let n=qr({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=Yr,t.render=t,t.prototype.isReactComponent=t._forwarded=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}const Zr=(e,t)=>null==e?null:tn(tn(e).map(t)),Xr={map:Zr,forEach:Zr,count:e=>e?tn(e).length:0,only(e){const t=tn(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:tn},Jr=Dt._catchError;Dt._catchError=function(e,t,n,r){if(e.then){let r,o=t;for(;o=o._parent;)if((r=o._component)&&r._childDidSuspend)return null==t._dom&&(t._dom=n._dom,t._children=n._children),r._childDidSuspend(e,t)}Jr(e,t,n,r)};const Qr=Dt.unmount;function eo(e,t,n){return e&&(e._component&&e._component.__hooks&&(e._component.__hooks._list.forEach((e=>{"function"==typeof e._cleanup&&e._cleanup()})),e._component.__hooks=null),null!=(e=qr({},e))._component&&(e._component._parentDom===n&&(e._component._parentDom=t),e._component=null),e._children=e._children&&e._children.map((e=>eo(e,t,n)))),e}function to(e,t,n){return e&&(e._original=null,e._children=e._children&&e._children.map((e=>to(e,t,n))),e._component&&e._component._parentDom===t&&(e._dom&&n.insertBefore(e._dom,e._nextDom),e._component._force=!0,e._component._parentDom=n)),e}function no(){this._pendingSuspensionCount=0,this._suspenders=null,this._detachOnNextRender=null}function ro(e){let t=e._parent._component;return t&&t._suspended&&t._suspended(e)}function oo(e){let t,n,r;function o(o){if(t||(t=e(),t.then((e=>{n=e.default||e}),(e=>{r=e}))),r)throw r;if(!n)throw t;return Ft(n,o)}return o.displayName="Lazy",o._forwarded=!0,o}Dt.unmount=function(e){const t=e._component;t&&t._onResolve&&t._onResolve(),t&&!0===e._hydrating&&(e.type=null),Qr&&Qr(e)},no.prototype=new Yt,no.prototype._childDidSuspend=function(e,t){const n=t._component,r=this;null==r._suspenders&&(r._suspenders=[]),r._suspenders.push(n);const o=ro(r._vnode);let i=!1;const l=()=>{i||(i=!0,n._onResolve=null,o?o(u):u())};n._onResolve=l;const u=()=>{if(!--r._pendingSuspensionCount){if(r.state._suspended){const e=r.state._suspended;r._vnode._children[0]=to(e,e._component._parentDom,e._component._originalParentDom)}let e;for(r.setState({_suspended:r._detachOnNextRender=null});e=r._suspenders.pop();)e.forceUpdate()}},s=!0===t._hydrating;r._pendingSuspensionCount++||s||r.setState({_suspended:r._detachOnNextRender=r._vnode._children[0]}),e.then(l,l)},no.prototype.componentWillUnmount=function(){this._suspenders=[]},no.prototype.render=function(e,t){if(this._detachOnNextRender){if(this._vnode._children){const e=document.createElement("div"),t=this._vnode._children[0]._component;this._vnode._children[0]=eo(this._detachOnNextRender,e,t._originalParentDom=t._parentDom)}this._detachOnNextRender=null}const n=t._suspended&&Ft(Gt,null,e.fallback);return n&&(n._hydrating=null),[Ft(Gt,null,t._suspended?null:e.children),n]};function io(){this._next=null,this._map=null}const lo=(e,t,n)=>{if(++n[1]===n[0]&&e._map.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e._map.size))for(n=e._next;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e._next=n=n[2]}};function uo(e){return this.getChildContext=()=>e.context,e.children}function so(e){const t=this;let n=e._container;t.componentWillUnmount=function(){_n(null,t._temp),t._temp=null,t._container=null},t._container&&t._container!==n&&t.componentWillUnmount(),e._vnode?(t._temp||(t._container=n,t._temp={nodeType:1,parentNode:n,childNodes:[],appendChild(e){this.childNodes.push(e),t._container.appendChild(e)},insertBefore(e,n){this.childNodes.push(e),t._container.appendChild(e)},removeChild(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t._container.removeChild(e)}}),_n(Ft(uo,{context:t.context},e._vnode),t._temp)):t._temp&&t.componentWillUnmount()}function ao(e,t){const n=Ft(so,{_vnode:e,_container:t});return n.containerInfo=t,n}io.prototype=new Yt,io.prototype._suspended=function(e){const t=this,n=ro(t._vnode);let r=t._map.get(e);return r[0]++,o=>{const i=()=>{t.props.revealOrder?(r.push(o),lo(t,e,r)):o()};n?n(i):i()}},io.prototype.render=function(e){this._next=null,this._map=new Map;const t=tn(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(let e=t.length;e--;)this._map.set(t[e],this._next=[1,0,this._next]);return e.children},io.prototype.componentDidUpdate=io.prototype.componentDidMount=function(){this._map.forEach(((e,t)=>{lo(this,t,e)}))};const co="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,po=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,fo=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ho=/[A-Z0-9]/g,_o="undefined"!=typeof document,mo=e=>("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e);function yo(e,t,n){return null==t._children&&(t.textContent=""),_n(e,t),"function"==typeof n&&n(),e?e._component:null}function go(e,t,n){return mn(e,t),"function"==typeof n&&n(),e?e._component:null}Yt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((e=>{Object.defineProperty(Yt.prototype,e,{configurable:!0,get(){return this["UNSAFE_"+e]},set(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));let vo=Dt.event;function bo(){}function wo(){return this.cancelBubble}function xo(){return this.defaultPrevented}Dt.event=e=>(vo&&(e=vo(e)),e.persist=bo,e.isPropagationStopped=wo,e.isDefaultPrevented=xo,e.nativeEvent=e);let So,Eo={configurable:!0,get(){return this.class}},Po=Dt.vnode;Dt.vnode=e=>{let t=e.type,n=e.props,r=n;if("string"==typeof t){r={};for(let e in n){let o=n[e];if("value"===e&&"defaultValue"in n&&null==o||_o&&"children"===e&&"noscript"===t)continue;let i=e.toLowerCase();"defaultValue"===e&&"value"in n&&null==n.value?e="value":"download"===e&&!0===o?o="":"ondoubleclick"===i?e="ondblclick":"onchange"!==i||"input"!==t&&"textarea"!==t||mo(n.type)?"onfocus"===i?e="onfocusin":"onblur"===i?e="onfocusout":fo.test(e)?e=i:-1===t.indexOf("-")&&po.test(e)?e=e.replace(ho,"-$&").toLowerCase():null===o&&(o=void 0):i=e="oninput","oninput"===i&&(e=i,r[e]&&(e="oninputCapture")),r[e]=o}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=tn(n.children).forEach((e=>{e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=tn(n.children).forEach((e=>{r.multiple?e.props.selected=-1!=r.defaultValue.indexOf(e.props.value):e.props.selected=r.defaultValue==e.props.value}))),e.props=r,n.class!=n.className&&(Eo.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Eo))}e.$$typeof=co,Po&&Po(e)};const ko=Dt._render;Dt._render=function(e){ko&&ko(e),So=e._component};const Mo=Dt.diffed;Dt.diffed=function(e){Mo&&Mo(e);const t=e.props,n=e._dom;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),So=null};const Oo={ReactCurrentDispatcher:{current:{readContext:e=>So._globalContext[e._id].props.value}}},To="17.0.2";function Co(e){return Ft.bind(null,e)}function No(e){return!!e&&e.$$typeof===co}function Do(e){return No(e)?yn.apply(null,arguments):e}function Ao(e){return!!e._children&&(_n(null,e),!0)}function $o(e){return e&&(e.base||1===e.nodeType&&e)||null}const Ro=(e,t)=>e(t),Lo=(e,t)=>e(t),Wo=Gt;function jo(e){e()}function Io(e){return e}function Uo(){return[!1,jo]}const Ho=Mr;function qo(e,t){const n=t(),[{_instance:r},o]=Er({_instance:{_value:n,_getSnapshot:t}});return Mr((()=>{r._value=n,r._getSnapshot=t,Fr(r._value,t())||o({_instance:r})}),[e,n,t]),kr((()=>(Fr(r._value,r._getSnapshot())||o({_instance:r}),e((()=>{Fr(r._value,r._getSnapshot())||o({_instance:r})})))),[e]),n}var zo={useState:Er,useId:$r,useReducer:Pr,useEffect:kr,useLayoutEffect:Mr,useInsertionEffect:Ho,useTransition:Uo,useDeferredValue:Io,useSyncExternalStore:qo,startTransition:jo,useRef:Or,useImperativeHandle:Tr,useMemo:Cr,useCallback:Nr,useContext:Dr,useDebugValue:Ar,version:To,Children:Xr,render:yo,hydrate:go,unmountComponentAtNode:Ao,createPortal:ao,createElement:Ft,createContext:gn,createFactory:Co,cloneElement:Do,createRef:Bt,Fragment:Gt,isValidElement:No,findDOMNode:$o,Component:Yt,PureComponent:Vr,memo:Br,forwardRef:Kr,flushSync:Lo,unstable_batchedUpdates:Ro,StrictMode:Wo,Suspense:no,SuspenseList:io,lazy:oo,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Oo},Fo=Object.freeze({__proto__:null,Children:Xr,Component:Yt,Fragment:Gt,PureComponent:Vr,StrictMode:Wo,Suspense:no,SuspenseList:io,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Oo,cloneElement:Do,createContext:gn,createElement:Ft,createFactory:Co,createPortal:ao,createRef:Bt,default:zo,findDOMNode:$o,flushSync:Lo,forwardRef:Kr,hydrate:go,isValidElement:No,lazy:oo,memo:Br,render:yo,startTransition:jo,unmountComponentAtNode:Ao,unstable_batchedUpdates:Ro,useCallback:Nr,useContext:Dr,useDebugValue:Ar,useDeferredValue:Io,useEffect:kr,useErrorBoundary:function(e){var t=Sr(sr++,10),n=Er();return t.__=e,ar.componentDidCatch||(ar.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:$r,useImperativeHandle:Tr,useInsertionEffect:Ho,useLayoutEffect:Mr,useMemo:Cr,useReducer:Pr,useRef:Or,useState:Er,useSyncExternalStore:qo,useTransition:Uo,version:To}),Vo=ur(Fo),Bo=Vo;var Go="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Yo=Bo.useState,Ko=Bo.useEffect,Zo=Bo.useLayoutEffect,Xo=Bo.useDebugValue;function Jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Go(e,n)}catch(e){return!0}}var Qo="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=Yo({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Zo((function(){o.value=n,o.getSnapshot=t,Jo(o)&&i({inst:o})}),[e,n,t]),Ko((function(){return Jo(o)&&i({inst:o}),e((function(){Jo(o)&&i({inst:o})}))}),[e]),Xo(n),n};hr.useSyncExternalStore=void 0!==Bo.useSyncExternalStore?Bo.useSyncExternalStore:Qo,dr.exports=hr;var ei={},ti={get exports(){return ei},set exports(e){ei=e}},ni={},ri=Vo,oi=fr;var ii="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},li=oi.useSyncExternalStore,ui=ri.useRef,si=ri.useEffect,ai=ri.useMemo,ci=ri.useDebugValue;ni.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=ui(null);if(null===i.current){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=ai((function(){function e(e){if(!s){if(s=!0,i=e,e=r(e),void 0!==o&&l.hasValue){var t=l.value;if(o(t,e))return u=t}return u=e}if(t=u,ii(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(i=e,u=n)}var i,u,s=!1,a=void 0===n?null:n;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]}),[t,n,r,o]);var u=li(e,i[0],i[1]);return si((function(){l.hasValue=!0,l.value=u}),[u]),ci(u),u},function(e){e.exports=ni}(ti);let pi=function(e){e()};const fi=()=>pi,di=gn(null);function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hi.apply(this,arguments)}function _i(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}var mi={},yi={get exports(){return mi},set exports(e){mi=e}},gi={},vi="function"==typeof Symbol&&Symbol.for,bi=vi?Symbol.for("react.element"):60103,wi=vi?Symbol.for("react.portal"):60106,xi=vi?Symbol.for("react.fragment"):60107,Si=vi?Symbol.for("react.strict_mode"):60108,Ei=vi?Symbol.for("react.profiler"):60114,Pi=vi?Symbol.for("react.provider"):60109,ki=vi?Symbol.for("react.context"):60110,Mi=vi?Symbol.for("react.async_mode"):60111,Oi=vi?Symbol.for("react.concurrent_mode"):60111,Ti=vi?Symbol.for("react.forward_ref"):60112,Ci=vi?Symbol.for("react.suspense"):60113,Ni=vi?Symbol.for("react.suspense_list"):60120,Di=vi?Symbol.for("react.memo"):60115,Ai=vi?Symbol.for("react.lazy"):60116,$i=vi?Symbol.for("react.block"):60121,Ri=vi?Symbol.for("react.fundamental"):60117,Li=vi?Symbol.for("react.responder"):60118,Wi=vi?Symbol.for("react.scope"):60119;function ji(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case bi:switch(e=e.type){case Mi:case Oi:case xi:case Ei:case Si:case Ci:return e;default:switch(e=e&&e.$$typeof){case ki:case Ti:case Ai:case Di:case Pi:return e;default:return t}}case wi:return t}}}function Ii(e){return ji(e)===Oi}gi.AsyncMode=Mi,gi.ConcurrentMode=Oi,gi.ContextConsumer=ki,gi.ContextProvider=Pi,gi.Element=bi,gi.ForwardRef=Ti,gi.Fragment=xi,gi.Lazy=Ai,gi.Memo=Di,gi.Portal=wi,gi.Profiler=Ei,gi.StrictMode=Si,gi.Suspense=Ci,gi.isAsyncMode=function(e){return Ii(e)||ji(e)===Mi},gi.isConcurrentMode=Ii,gi.isContextConsumer=function(e){return ji(e)===ki},gi.isContextProvider=function(e){return ji(e)===Pi},gi.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===bi},gi.isForwardRef=function(e){return ji(e)===Ti},gi.isFragment=function(e){return ji(e)===xi},gi.isLazy=function(e){return ji(e)===Ai},gi.isMemo=function(e){return ji(e)===Di},gi.isPortal=function(e){return ji(e)===wi},gi.isProfiler=function(e){return ji(e)===Ei},gi.isStrictMode=function(e){return ji(e)===Si},gi.isSuspense=function(e){return ji(e)===Ci},gi.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===xi||e===Oi||e===Ei||e===Si||e===Ci||e===Ni||"object"==typeof e&&null!==e&&(e.$$typeof===Ai||e.$$typeof===Di||e.$$typeof===Pi||e.$$typeof===ki||e.$$typeof===Ti||e.$$typeof===Ri||e.$$typeof===Li||e.$$typeof===Wi||e.$$typeof===$i)},gi.typeOf=ji,function(e){e.exports=gi}(yi);var Ui=mi,Hi={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},qi={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},zi={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fi={};function Vi(e){return Ui.isMemo(e)?zi:Fi[e.$$typeof]||Hi}Fi[Ui.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Fi[Ui.Memo]=zi;var Bi=Object.defineProperty,Gi=Object.getOwnPropertyNames,Yi=Object.getOwnPropertySymbols,Ki=Object.getOwnPropertyDescriptor,Zi=Object.getPrototypeOf,Xi=Object.prototype;var Ji,Qi=function e(t,n,r){if("string"!=typeof n){if(Xi){var o=Zi(n);o&&o!==Xi&&e(t,o,r)}var i=Gi(n);Yi&&(i=i.concat(Yi(n)));for(var l=Vi(t),u=Vi(n),s=0;s<i.length;++s){var a=i[s];if(!(qi[a]||r&&r[a]||u&&u[a]||l&&l[a])){var c=Ki(n,a);try{Bi(t,a,c)}catch(e){}}}}return t},el={},tl={get exports(){return el},set exports(e){el=e}},nl={},rl=Symbol.for("react.element"),ol=Symbol.for("react.portal"),il=Symbol.for("react.fragment"),ll=Symbol.for("react.strict_mode"),ul=Symbol.for("react.profiler"),sl=Symbol.for("react.provider"),al=Symbol.for("react.context"),cl=Symbol.for("react.server_context"),pl=Symbol.for("react.forward_ref"),fl=Symbol.for("react.suspense"),dl=Symbol.for("react.suspense_list"),hl=Symbol.for("react.memo"),_l=Symbol.for("react.lazy"),ml=Symbol.for("react.offscreen");function yl(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case rl:switch(e=e.type){case il:case ul:case ll:case fl:case dl:return e;default:switch(e=e&&e.$$typeof){case cl:case al:case pl:case _l:case hl:case sl:return e;default:return t}}case ol:return t}}}Ji=Symbol.for("react.module.reference"),nl.ContextConsumer=al,nl.ContextProvider=sl,nl.Element=rl,nl.ForwardRef=pl,nl.Fragment=il,nl.Lazy=_l,nl.Memo=hl,nl.Portal=ol,nl.Profiler=ul,nl.StrictMode=ll,nl.Suspense=fl,nl.SuspenseList=dl,nl.isAsyncMode=function(){return!1},nl.isConcurrentMode=function(){return!1},nl.isContextConsumer=function(e){return yl(e)===al},nl.isContextProvider=function(e){return yl(e)===sl},nl.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===rl},nl.isForwardRef=function(e){return yl(e)===pl},nl.isFragment=function(e){return yl(e)===il},nl.isLazy=function(e){return yl(e)===_l},nl.isMemo=function(e){return yl(e)===hl},nl.isPortal=function(e){return yl(e)===ol},nl.isProfiler=function(e){return yl(e)===ul},nl.isStrictMode=function(e){return yl(e)===ll},nl.isSuspense=function(e){return yl(e)===fl},nl.isSuspenseList=function(e){return yl(e)===dl},nl.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===il||e===ul||e===ll||e===fl||e===dl||e===ml||"object"==typeof e&&null!==e&&(e.$$typeof===_l||e.$$typeof===hl||e.$$typeof===sl||e.$$typeof===al||e.$$typeof===pl||e.$$typeof===Ji||void 0!==e.getModuleId)},nl.typeOf=yl,function(e){e.exports=nl}(tl);const gl=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function vl(e,t,n,r,o){let i,l,u,s,a,{areStatesEqual:c,areOwnPropsEqual:p,areStatePropsEqual:f}=o,d=!1;function h(o,d){const h=!p(d,l),_=!c(o,i,d,l);return i=o,l=d,h&&_?(u=e(i,l),t.dependsOnOwnProps&&(s=t(r,l)),a=n(u,s,l),a):h?(e.dependsOnOwnProps&&(u=e(i,l)),t.dependsOnOwnProps&&(s=t(r,l)),a=n(u,s,l),a):_?function(){const t=e(i,l),r=!f(t,u);return u=t,r&&(a=n(u,s,l)),a}():a}return function(o,c){return d?h(o,c):(i=o,l=c,u=e(i,l),s=t(r,l),a=n(u,s,l),d=!0,a)}}function bl(e){return function(t){const n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function wl(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function xl(e,t){return function(t,n){const r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=wl(e);let o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=wl(o),o=r(t,n)),o},r}}function Sl(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function El(e,t,n){return hi({},n,e,t)}const Pl={notify(){},get:()=>[]};function kl(e,t){let n,r=Pl;function o(){l.onStateChange&&l.onStateChange()}function i(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){const e=fi();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}const l={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Pl)},getListeners:()=>r};return l}const Ml=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?Mr:kr;function Ol(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Tl(e,t){if(Ol(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Ol(e[n[r]],t[n[r]]))return!1;return!0}const Cl=["reactReduxForwardedRef"];let Nl=()=>{throw new Error("uSES not initialized!")};const Dl=[null,null];function Al(e,t,n,r,o,i){e.current=r,n.current=!1,o.current&&(o.current=null,i())}function $l(e,t){return e===t}function Rl(e,t,n){let{pure:r,areStatesEqual:o=$l,areOwnPropsEqual:i=Tl,areStatePropsEqual:l=Tl,areMergedPropsEqual:u=Tl,forwardRef:s=!1,context:a=di}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c=a,p=function(e){return e?"function"==typeof e?xl(e):Sl(e,"mapStateToProps"):bl((()=>({})))}(e),f=function(e){return e&&"object"==typeof e?bl((t=>function(e,t){const n={};for(const r in e){const o=e[r];"function"==typeof o&&(n[r]=function(){return t(o(...arguments))})}return n}(e,t))):e?"function"==typeof e?xl(e):Sl(e,"mapDispatchToProps"):bl((e=>({dispatch:e})))}(t),d=function(e){return e?"function"==typeof e?function(e){return function(t,n){let r,{displayName:o,areMergedPropsEqual:i}=n,l=!1;return function(t,n,o){const u=e(t,n,o);return l?i(u,r)||(r=u):(l=!0,r=u),r}}}(e):Sl(e,"mergeProps"):()=>El}(n),h=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",n=`Connect(${t})`,r={shouldHandleStateChanges:h,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:p,initMapDispatchToProps:f,initMergeProps:d,areStatesEqual:o,areStatePropsEqual:l,areOwnPropsEqual:i,areMergedPropsEqual:u};function a(t){const[n,o,i]=Cr((()=>{const{reactReduxForwardedRef:e}=t,n=_i(t,Cl);return[t.context,e,n]}),[t]),l=Cr((()=>n&&n.Consumer&&el.isContextConsumer(zo.createElement(n.Consumer,null))?n:c),[n,c]),u=Dr(l),s=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),a=Boolean(u)&&Boolean(u.store),p=s?t.store:u.store,f=a?u.getServerState:p.getState,d=Cr((()=>function(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:o}=t,i=_i(t,gl);return vl(n(e,i),r(e,i),o(e,i),e,i)}(p.dispatch,r)),[p]),[_,m]=Cr((()=>{if(!h)return Dl;const e=kl(p,s?void 0:u.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,s,u]),y=Cr((()=>s?u:hi({},u,{subscription:_})),[s,u,_]),g=Or(),v=Or(i),b=Or(),w=Or(!1);Or(!1);const x=Or(!1),S=Or();Ml((()=>(x.current=!0,()=>{x.current=!1})),[]);const E=Cr((()=>()=>b.current&&i===v.current?b.current:d(p.getState(),i)),[p,i]),P=Cr((()=>e=>_?function(e,t,n,r,o,i,l,u,s,a,c){if(!e)return()=>{};let p=!1,f=null;const d=()=>{if(p||!u.current)return;const e=t.getState();let n,d;try{n=r(e,o.current)}catch(e){d=e,f=e}d||(f=null),n===i.current?l.current||a():(i.current=n,s.current=n,l.current=!0,c())};return n.onStateChange=d,n.trySubscribe(),d(),()=>{if(p=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}(h,p,_,d,v,g,w,x,b,m,e):()=>{}),[_]);var k,M,O;let T;k=Al,M=[v,g,w,i,b,m],Ml((()=>k(...M)),O);try{T=Nl(P,E,f?()=>d(f(),i):E)}catch(e){throw S.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${S.current.stack}\n\n`),e}Ml((()=>{S.current=void 0,b.current=void 0,g.current=T}));const C=Cr((()=>zo.createElement(e,hi({},T,{ref:o}))),[o,e,T]);return Cr((()=>h?zo.createElement(l.Provider,{value:y},C):C),[l,C,y])}const _=zo.memo(a);if(_.WrappedComponent=e,_.displayName=a.displayName=n,s){const t=zo.forwardRef((function(e,t){return zo.createElement(_,hi({},e,{reactReduxForwardedRef:t}))}));return t.displayName=n,t.WrappedComponent=e,Qi(t,e)}return Qi(_,e)}}function Ll(e){let{store:t,context:n,children:r,serverState:o}=e;const i=Cr((()=>{const e=kl(t);return{store:t,subscription:e,getServerState:o?()=>o:void 0}}),[t,o]),l=Cr((()=>t.getState()),[t]);Ml((()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[i,l]);const u=n||di;return zo.createElement(u.Provider,{value:i},r)}var Wl;Wl=fr.useSyncExternalStore,Nl=Wl,pi=Ro;const jl=W.require("rootScope"),Il=e=>({setYPointer:t=>{e((e=>({type:y,payload:e}))(t))}});const Ul=Rl((function(e){if(Te(e))return{isLoading:!0};const t=Sn(e),n=An(e);let r;if(Le(e)){const o=$n(e)+3,i=Rn(e),{dry:l,moist:u,isohume:s,elevThermalTop:a,pThermalTop:c,pCloudTop:p}=function(e,t,n,r,o){const i={},l=[],u=[],s=[],a=[],c=at(ct(o),r),p=V(e.level,e.gh),f=p(r),d=Math.max(f,e.gh[e.gh.length-1]),h=(d-f)/t;for(let e=f;e<=d;e+=h){const t=p.invert(e),o=st(t,n,r),i=dt(ft(t,c));l.push(e),u.push(t),s.push(o),a.push(i)}const _=q(l,s,l,a);let m=q(l,s,e.gh,e.temp);if(!m)return null;if(_[0]<m[0]){m=_;const t=p.invert(_[0]),n=[],r=[],o=[];let l=_[1],s=t;for(let e=_[0];e<d+h;e+=h){const t=p.invert(e);l+=(t-s)*pt(t,l),s=t,n.push(e),r.push(t),o.push(l)}const c=z(a,u).filter((e=>e[1]>t));c.push([_[1],t]);let f=z(o,r);const y=q(n,o,e.gh,e.temp);if(i.pCloudTop=e.level[e.level.length-1],y){const e=p.invert(y[0]);f=f.filter((t=>t[1]>=e)),f.push([y[1],e]),i.pCloudTop=e}i.moist=f,i.isohume=c}const y=p.invert(m[0]),g=z(s,u).filter((e=>e[1]>y));return g.push([m[1],y]),i.dry=g,i.pThermalTop=y,i.elevThermalTop=m[0],i}(t,40,o,n,i)||{};r={trajectory:l.concat(u||[]),isohume:s,elevThermalTop:a,pThermalTop:c,pCloudTop:p}}return{isLoading:!1,params:t,pMax:wn(e),cloudCover:Oe(e),pSfc:n,parcel:r,formatAltitude:xe(e),formatTemp:we(e),tAxisToPx:On(e),tToPx:Mn(e),pToPx:Tn(e),pAxisToPx:Nn(e),line:Dn(e),tMetric:de(e),tAxisStep:Wn(e),ghMetric:he(e),ghAxisStep:Ln(e),zoom:ve(e),skew:kn(e),yPointer:be(e)}}),Il)(class extends zn{constructor(e){super(e)}render(e){let{isLoading:t,params:n,pMax:r,width:o,height:i,cloudCover:l,pSfc:u,parcel:s,formatAltitude:a,formatTemp:c,tAxisToPx:p,tToPx:f,pToPx:d,pAxisToPx:h,line:_,tMetric:m,tAxisStep:y,ghMetric:g,ghAxisStep:v,zoom:b,skew:w,yPointer:x,setYPointer:S}=e;if(t)return;const E=d(u);let P=0,k=0;return null!=x&&(P=H(n.level,n.temp,[d.invert(x)])[0],k=H(n.level,n.dewpoint,[d.invert(x)])[0]),Ft("svg",{width:o,height:i+20},Ft("defs",null,Ft("pattern",{id:"diag-hatch",patternUnits:"userSpaceOnUse",width:"8",height:"8",patternTransform:"rotate(45 2 2)"},Ft("rect",{width:"8",height:"8",fill:"#f8f8f8",opacity:"0.7"}),Ft("path",{d:"M 0,-1 L 0,11",stroke:"gray","stroke-width":"1"})),Ft("filter",{id:"whiteOutlineEffect","color-interpolation-filters":"sRGB"},Ft("feMorphology",{in:"SourceAlpha",result:"MORPH",operator:"dilate",radius:"2"}),Ft("feColorMatrix",{in:"MORPH",result:"WHITENED",type:"matrix",values:"-1 0 0 0 1, 0 -1 0 0 1, 0 0 -1 0 1, 0 0 0 1 0"}),Ft("feMerge",null,Ft("feMergeNode",{in:"WHITENED"}),Ft("feMergeNode",{in:"SourceGraphic"})))),Ft("g",{class:"chart skewt",onPointerLeave:()=>S(null),onPointerMove:e=>S(e.offsetY)},Ft("rect",{width:o,height:i,fill:"white",opacity:"0.1"}),Ft("g",{class:"axis"},[-20,-10,0,10,20,30,40,50,60,70,80].map((e=>Ft(Xn,{temp:e+273.15,pressure:r,height:i,pToPx:d,line:_}))),[-20,-10,0,5,10,15,20,25,30,35].map((e=>Ft(Jn,{temp:e+273.15,pressure:r,height:i,pToPx:d,line:_}))),[-20,-15,-10,-5,0,5,10,15,20].map((e=>Ft(Qn,{temp:e+273.15,pressure:r,height:i,pToPx:d,line:_}))),[-70,-60,-50,-40,-30,-20,-10,0,10,20,30,40].map((e=>Ft(er,{temp:e+273.15,height:i,pToPx:d,line:_}))),s&&Ft(Kn,{parcel:s,width:o,height:i,line:_,pToPx:d,formatAltitude:a}),Ft(tr,{width:o,height:i,tAxisToPx:p,step:y,metric:m}),Ft(rr,{width:o,height:i,cloudCover:l,pToPx:d,pSfc:u,highClouds:b}),Ft(nr,{width:o,pAxisToPx:h,step:v,metric:g})),Ft("path",{class:"line temperature",d:_(z(n.temp,n.level))}),Ft("path",{class:"line dewpoint",d:_(z(n.dewpoint,n.level))}),Ft("rect",{class:"surface",y:E,width:o,height:i-E+1}),null!=x&&x<E?Ft("g",null,Ft("text",{class:"tick","text-anchor":"end",style:"fill: black;","dominant-baseline":"hanging",x:o-7,y:x+4,filter:"url(#whiteOutlineEffect)"},100*Math.round(h.invert(x)/100)),Ft("text",{class:"tick",style:"fill: red;","dominant-baseline":"hanging",x:f(P)+w*(i-x)+10,y:x+4,filter:"url(#whiteOutlineEffect)"},c(P)),Ft("text",{class:"tick",style:"fill: steelblue;","dominant-baseline":"hanging",x:f(k)+w*(i-x)+10,y:x+4,filter:"url(#whiteOutlineEffect)"},c(k)),Ft("line",{y1:x,y2:x,x2:o,class:"boundary"})):null,Ft("rect",{class:"border",height:i,width:o})))}}),Hl=Rl((e=>Te(e)?{isLoading:!0}:{isLoading:!1,params:Sn(e),windSpeedMax:In(e),format:Se(e),metric:_e(e),pSfc:An(e),pToPx:Tn(e),speedToPx:Un(e),line:Hn(e),zoom:ve(e),yPointer:be(e)}),Il)(class extends zn{constructor(e){super(e)}render(e){let{isLoading:t,params:n,width:r,height:o,windSpeedMax:i,metric:l,format:u,pSfc:s,pToPx:a,speedToPx:c,line:p,zoom:f,yPointer:d,setYPointer:h}=e;if(t)return;const _=a(s);let m=0;return null!=d&&(m=H(n.level,n.windSpeed,[a.invert(d)])[0]),Ft("g",{class:"chart wind",onPointerLeave:()=>h(null),onPointerMove:e=>h(e.offsetY)},Ft("defs",null,Ft("filter",{id:"whiteOutlineEffect","color-interpolation-filters":"sRGB"},Ft("feMorphology",{in:"SourceAlpha",result:"MORPH",operator:"dilate",radius:"2"}),Ft("feColorMatrix",{in:"MORPH",result:"WHITENED",type:"matrix",values:"-1 0 0 0 1, 0 -1 0 0 1, 0 0 -1 0 1, 0 0 0 1 0"}),Ft("feMerge",null,Ft("feMergeNode",{in:"WHITENED"}),Ft("feMergeNode",{in:"SourceGraphic"})))),Ft("path",{class:"line wind",d:p(z(n.windSpeed,n.level))}),Ft(ir,{speedToPx:c,width:r,height:o,maxSpeed:i,metric:l,format:u,zoom:f}),Ft("g",{transform:`translate(${r/2}, 0)`},n.level.map(((e,t)=>e<=s?Ft(lr,{direction:n.windDir[t],speed:n.windSpeed[t],y:a(e)}):null))),Ft("rect",{class:"surface",y:_,width:r,height:o-_+1}),null!=d&&d<_?Ft("g",null,Ft("text",{class:"tick","text-anchor":"end","dominant-baseline":"hanging",x:r-5,y:d+4,filter:"url(#whiteOutlineEffect)"},u(m)),Ft("line",{id:"wind-hint-line",y1:d,y2:d,x2:r,class:"boundary"})):null,Ft("rect",{class:"border",height:o,width:r}))}}),ql=Rl((e=>({favorites:me(e),location:Ee(e),isMobile:jl.isMobile||jl.isTablet})))(class extends zn{render(e){let{favorites:t,location:n,isMobile:r,onSelected:o}=e;if(t.sort(((e,t)=>Gn(e)>Gn(t)?1:-1)),r){const e=Vn.get("product"),r=Bn.getAllPointProducts(Fn.str2latLon(n)).filter((e=>w.some((t=>e.startsWith(t)))));return r.sort(),Ft("div",{style:"display: flex; justify-content: space-between; margin-bottom: 3px"},Ft("select",{id:"wsp-select-fav",onChange:e=>function(e,t){if(e.target.value){const[n,r]=e.target.value.split("#").map((e=>Number(e)));t({lat:n,lon:r},e)}}(e,o)},Ft("option",null,"Pick a favorite"),t.map((e=>Ft("option",{value:`${e.lat}#${e.lon}`,selected:Fn.latLon2str(e)==n},Gn(e))))),Ft("select",{id:"wsp-select-model",onChange:e=>Tt().dispatch(M(e.target.value))},r.map((t=>Ft("option",{value:t,selected:t==e},t)))))}return 0==t.length?Ft("div",{id:"fly-to",class:"size-s"},Ft("span",{"data-icon":"m"},"Add favorites to enable fly to.")):Ft("div",{id:"fly-to",class:"size-s"},t.map((e=>Ft("span",{class:"location"+(Fn.latLon2str(e)==n?" selected":""),onClick:t=>o(e,t)},Gn(e)))))}});function zl(e){return new Date(e).toLocaleString([],{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}const Fl=Rl((e=>Te(e)?{isLoading:!0}:{isLoading:!1,modelName:pe(e),updated:Ne(e),nextUpdate:De(e)}))((e=>{let{isLoading:t,modelName:n,updated:r,nextUpdate:o}=e;if(t)return;const i=zl(r),l=zl(o);return Ft("p",{class:"model"},"Model ",Ft("strong",null,n.toUpperCase())," (",i,"). Next update on ",l,".")})),Vl=Rl((e=>{const t=ye(e),n=(e=>e.plugin.height)(e),r={centerMap:We(e),wheelHandler:()=>null,title:()=>Ft("p",{class:"model"},"Loading..."),chart:()=>Ft(Yn,{cx:t/2,cy:n/2}),width:t,height:n,graphHeight:ge(e),skewTWidth:bn(e),windgramWidth:jn(e),zoom:ve(e)};if(Te(e))return r;return Sn(e)?{...r,title:()=>Ft(Fl,null),chart:e=>{let{skewTWidth:t,windgramWidth:n,height:r}=e;return Ft("g",null,Ft(Ul,{width:t,height:r}),Ft("g",{transform:`translate(${t+5}, 0)`},Ft(Hl,{width:n,height:r})))},wheelHandler:Ue(e)}:{...r,title:()=>Ft("p",{class:"model"},"Forecast not available"),chart:()=>Ft("text",{x:"50%",y:"50%","text-anchor":"middle"},"Forecast not available")}}),(e=>({onFavSelected:t=>n=>{let{lat:r,lon:o}=n;e(k(r,o)),t(r,o)},onZoomClick:()=>{e({type:b})}})))((e=>{let{title:t,chart:n,centerMap:r,onFavSelected:o,wheelHandler:i,width:l,height:u,zoom:s,onZoomClick:a,graphHeight:c,skewTWidth:p,windgramWidth:f}=e;return Ft("div",null,t(),Ft("img",{class:"wsp-abs",src:"https://logs-01.loggly.com/inputs/8298f665-7a6e-44e6-926f-4795243b5e4b.gif?source=pixel",width:"1",height:"1"}),Ft("div",{style:"position:relative"},Ft("svg",{width:l,height:u,onWheel:i},n({height:c,skewTWidth:p,windgramWidth:f})),Ft("div",{id:"wsp-zoom",class:"iconfont clickable-size",onClick:a},s?"":"")),Ft(ql,{onSelected:o(r)}))}));const Bl=W.require("map").map,Gl=W.require("rootScope"),Yl=W.require("utils"),Kl=W.require("favs");W.loadPlugin({name:"windy-plugin-sounding",version:"1.5.4",author:"Victor Berchet",repository:{type:"git",url:"git+https://github.com/vicb/windy-plugin-sounding"},description:"Soundings for paraglider pilots.",displayName:"Better Sounding",hook:"contextmenu",className:"plugin-lhpane",classNameMobile:"window",exclusive:"lhpane",attachPointMobile:"#plugins"},'<div class="plugin-content">\n  <div class="title">Sounding forecast</div>\n  <div id="bsounding-chart"></div>\n</div>\n',"@media only screen and (min-device-width:736px){.onwindy-plugin-sounding .left-border{left:550px}}.onwindy-plugin-sounding #search{display:none}#windy-plugin-sounding{font-size:12px;padding:1em 1em;line-height:2;z-index:100;height:100%;width:550px}#windy-plugin-sounding .title{margin:0 0 .3em .6em;font-size:16px}@media screen and (max-device-width:1024px){#windy-plugin-sounding{display:block;left:0;top:0;right:0;width:100%;height:auto;margin:0}#windy-plugin-sounding .plugin-content{bottom:auto}#windy-plugin-sounding .title{margin:0 0 2px 5px;font-size:16px}#windy-plugin-sounding p.model{display:none}}#windy-plugin-sounding .closing-x{display:block}#windy-plugin-sounding .wsp-abs{position:absolute}#windy-plugin-sounding #wsp-zoom{position:absolute;top:5px;left:60px;font-size:25px;user-select:none;color:#9d0300}#windy-plugin-sounding select{font-size:1rem}#windy-plugin-sounding .axis line,#windy-plugin-sounding .axis path{fill:none;stroke:#000}#windy-plugin-sounding .axis .light{stroke-width:.2}#windy-plugin-sounding #bsounding-chart{padding:0 5px}#windy-plugin-sounding #bsounding-chart svg{touch-action:none}#windy-plugin-sounding #bsounding-chart p.model{margin:0}#windy-plugin-sounding #bsounding-chart .chart .border{fill:none;stroke:gray;stroke-width:1}#windy-plugin-sounding #bsounding-chart .cumulus{stroke:#030104;stroke-width:2px;fill:ivory}#windy-plugin-sounding #bsounding-chart .line{pointer-events:none;stroke-width:3;fill:none;stroke-linejoin:round}#windy-plugin-sounding #bsounding-chart .line.dewpoint{stroke:#4682b4}#windy-plugin-sounding #bsounding-chart .line.temperature{stroke:red}#windy-plugin-sounding #bsounding-chart .line.wind{stroke:purple}#windy-plugin-sounding #bsounding-chart line.boundary{stroke-width:1;stroke-dasharray:8;stroke:gray}#windy-plugin-sounding #bsounding-chart .moist{fill:none;stroke:green;stroke-width:.3;stroke-dasharray:4 6}#windy-plugin-sounding #bsounding-chart .dry{fill:none;stroke:green;stroke-width:.3}#windy-plugin-sounding #bsounding-chart .isohume{fill:none;stroke:#00f;stroke-width:.3;stroke-dasharray:4 6}#windy-plugin-sounding #bsounding-chart .isotherm{stroke:#8b0000;stroke-width:.3}#windy-plugin-sounding #bsounding-chart .isotherm.zero{stroke-width:1}#windy-plugin-sounding #bsounding-chart .parcel{stroke-width:3;fill:none;stroke-linejoin:round}#windy-plugin-sounding #bsounding-chart .parcel.trajectory{stroke:#599c00}#windy-plugin-sounding #bsounding-chart .parcel.isohume{stroke-width:1;stroke:gray;stroke-dasharray:4}#windy-plugin-sounding #bsounding-chart text.tick{font-size:12px;font-family:sans-serif;fill:#000}#windy-plugin-sounding #bsounding-chart .surface{fill:#8f6d4d}#windy-plugin-sounding #fly-to{padding:0 15px 0 8px}#windy-plugin-sounding #fly-to .location{border:1px solid #bbb;border-radius:1em;line-height:1em;padding:.3em .6em;user-select:none;display:inline-block;margin-right:.3em;cursor:pointer}#windy-plugin-sounding #fly-to .selected{background-color:#d49500;border-color:#d49500;color:#fff}",(function(){const e=W.require("utils").$,t=W.require("picker"),n=W.require("store"),r=Tt(),o=e("#bsounding-chart");if(_n(Ft(Ll,{store:r},Ft(Vl,null)),o),Gl.isMobileOrTablet){const e=document.querySelector("#windy-plugin-sounding"),t=e.classList;t.remove("plugin-lhpane"),t.add("window"),Yl.loadScript("https://unpkg.com/swipe-listener@1.3.0/dist/swipe-listener.min.js").then((()=>{SwipeListener(e,{minHorizontal:e.offsetWidth/6,mouse:!1}),e.addEventListener("swipe",(e=>{const{right:t,left:n}=e.detail.directions,r=n?-1:t?1:0;je(Tt().getState())({direction:r,changeDay:!0})}))})).catch((e=>console.error(e)))}this.onopen=e=>{let o,i;if(e)o=e.lat,i=e.lon;else{const e=this.query||{};if(null==e.lat||null==e.lon){const e=Bl.getCenter();o=e.lat,i=e.lng}else o=Number(e.lat),i=Number(e.lon)}if(!r.getState().plugin.active){Bl.setZoom(10,{animate:!1}),n.set("overlay","clouds");const e=n.on("timestamp",(()=>{r.dispatch(O(n.get("timestamp")))}));r.dispatch(T((()=>n.off(e))));const o=n.on("product",(()=>{r.dispatch(M(n.get("product")))}));if(r.dispatch(T((()=>n.off(o)))),Gl.isMobileOrTablet){const e=e=>{let{latlng:t}=e;return r.dispatch(k(t.lat,t.lng))};Bl.on("click",e),r.dispatch(T((()=>Bl.off("click",e))))}else{const e=t.on("pickerOpened",(e=>{let{lat:t,lon:n}=e;r.dispatch(k(t,n))}));r.dispatch(T((()=>t.off(e))));const n=t.on("pickerMoved",(e=>{let{lat:t,lon:n}=e;r.dispatch(k(t,n))}));r.dispatch(T((()=>t.off(n))))}const i=Kl.on("favsChanged",(()=>{r.dispatch(x(Kl.getArray()))}));r.dispatch(T((()=>Kl.off(i)))),r.dispatch(x(Kl.getArray())),r.dispatch(N(!0))}Ct(),r.dispatch(k(o,i)),r.dispatch(M(n.get("product"))),r.dispatch(O(n.get("timestamp"))),We(r.getState())(o,i),this.node.oncontextmenu=this.node.ondblclick=this.node.onclick=e=>e.stopPropagation()},this.onclose=()=>{r.dispatch(C()),r.dispatch({type:c}),r.dispatch(N(!1))}}))}();
